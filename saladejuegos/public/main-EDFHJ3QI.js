import{b as X,d as $,h as tt,o as et,p as nt}from"./chunk-A76EBF2T.js";import{a as W,c as G,d as J,e as Z,f as Y,g as K}from"./chunk-BSGNT5K5.js";import{j,p as Q}from"./chunk-IPLXXL6T.js";import{a as C}from"./chunk-5DZY57WY.js";import"./chunk-LJ5XHLMQ.js";import{$a as R,Ca as h,Ga as _,K as T,Na as P,Pa as v,Q as g,Qa as I,Ra as N,Sa as F,Ta as a,Ua as r,Va as p,W as b,X as f,Ya as w,Za as m,_a as u,ab as q,bb as D,cb as s,db as S,eb as x,gb as U,hb as z,ib as H,lb as L,mb as V,ob as A,sa as c,xa as B}from"./chunk-EIQFDW2Z.js";import{h as d}from"./chunk-FK42CRUA.js";var ot=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-QIUCYMK3.js").then(t=>t.HomeComponent)},{path:"login",loadComponent:()=>import("./chunk-QYS7LYAO.js").then(t=>t.LoginComponent)},{path:"quiensoy",loadComponent:()=>import("./chunk-SW66OI3B.js").then(t=>t.QuiensoyComponent)},{path:"registro",loadComponent:()=>import("./chunk-BHXLRCTP.js").then(t=>t.RegistroComponent)},{path:"resultados",loadComponent:()=>import("./chunk-GQ3IQDQN.js").then(t=>t.ResultsComponent)},{path:"encuesta",loadComponent:()=>import("./chunk-QTO3AZVL.js").then(t=>t.EncuestaComponent)},{path:"games",loadChildren:()=>import("./chunk-YDRTKQMU.js").then(t=>t.GamesRoutingModule)},{path:"**",loadComponent:()=>import("./chunk-IK65WPTC.js").then(t=>t.ErrorComponent)}];var it={providers:[A({eventCoalescing:!0}),K(ot),G()]};function at(t,n){t&1&&(a(0,"button",7),s(1,"Login"),r(),a(2,"button",8),s(3,"Registro"),r())}function st(t,n){if(t&1){let e=w();a(0,"button",9),s(1,"Resultados"),r(),a(2,"button",10),s(3,"Encuesta"),r(),a(4,"h3",11),p(5,"i",12),s(6),r(),a(7,"button",13),m("click",function(){b(e);let o=u();return f(o.signOutSession())}),s(8,"Cerrar Sesion"),r()}if(t&2){let e,i=u();c(6),x(" Usuario: ",(e=i.supaBase.currentUser())==null?null:e.email,"")}}var M=class t{constructor(n){this.router=n}supaBase=g(C);ngOnInit(){this.supaBase.supabaseFunctions.auth.onAuthStateChange((n,e)=>{n==="SIGNED_IN"?this.supaBase.currentUser.set({email:e?.user.email}):n==="SIGNED_OUT"&&this.supaBase.currentUser.set(null)})}redirctoTo(n){n="games/"+n,this.router.navigate([n])}signOutSession(){return d(this,null,function*(){let{error:n}=yield this.supaBase.supabaseFunctions.auth.signOut();n?console.error("Error al cerrar sesi\xF3n:",n):(console.log("Cierre de sesi\xF3n exitoso"),this.router.navigate(["/login"]))})}static \u0275fac=function(e){return new(e||t)(B(Z))};static \u0275cmp=h({type:t,selectors:[["app-navbar"]],decls:17,vars:1,consts:[[1,"nav"],[1,"dropdown"],["type","button","routerLink","home",1,"btn-Home","btn-default"],[1,"dropdown-content"],["type","button",1,"btn-Home","btn-default",2,"margin-bottom","5px","margin-top","5px",3,"click"],["type","button",1,"btn-Home","btn-default",2,"margin-bottom","5px",3,"click"],["type","button","routerLink","quiensoy",1,"btn","btn-default"],["type","button","routerLink","login",1,"btn","btn-default"],["type","button","routerLink","registro",1,"btn","btn-default"],["type","button","routerLink","resultados",1,"btn","btn-default",2,"left","23.3%","position","relative"],["type","button","routerLink","encuesta",1,"btn","btn-default",2,"left","23.3%","position","relative"],[2,"margin-right","15px","left","38%","position","relative"],[1,"fa-solid","fa-circle-user",2,"margin-right","10px"],["type","button",1,"btn","btn-default",2,"left","38%","position","relative",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),s(3,"Home"),r(),a(4,"div",3)(5,"button",4),m("click",function(){return i.redirctoTo("mayormenor")}),s(6,"Mayor o Menor"),r(),a(7,"button",5),m("click",function(){return i.redirctoTo("ahorcado")}),s(8,"Ahorcado"),r(),a(9,"button",5),m("click",function(){return i.redirctoTo("preguntados")}),s(10,"Preguntados"),r(),a(11,"button",5),m("click",function(){return i.redirctoTo("shooter")}),s(12,"Punteria"),r()()(),a(13,"button",6),s(14,"Quien Soy"),r(),_(15,at,4,0)(16,st,9,1),r()),e&2&&(c(15),v(i.supaBase.currentUser()===null?15:16))},dependencies:[Y],styles:['@font-face{font-family:westernFont;src:url("./media/DakotaRegular-eZpj6-HFFEUJUJ.ttf")}.nav[_ngcontent-%COMP%]{top:0;width:100%;background-color:#e73332;color:#fff;display:flex;padding:0 16px;align-items:center;height:76px;font-family:westernFont}.btn[_ngcontent-%COMP%]{background-color:#be0c0caf;font-size:22px;margin-right:15px;width:8%;border-color:bisque;transition:1s;color:bisque}.btn[_ngcontent-%COMP%]:hover{background-color:#000;border-color:bisque;color:#e73332}.btn[_ngcontent-%COMP%]:focus{background-color:#000;border-color:#e73332;color:bisque}.btn-Home[_ngcontent-%COMP%]{background-color:#be0c0caf;font-size:22px;margin-right:15px;height:45px;width:100%;border:1px solid bisque;transition:1s;color:bisque;border-radius:5px}.btn-Home[_ngcontent-%COMP%]:hover{background-color:#000;border-color:bisque;color:#e73332}.btn-Home[_ngcontent-%COMP%]:focus{background-color:#000;border-color:#e73332;color:bisque}.btn-Home[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}h3[_ngcontent-%COMP%]{font-size:25px;position:relative;color:bisque;text-shadow:5px 5px 5px black;margin-right:15px}.dropbtn[_ngcontent-%COMP%]{background-color:#04aa6d;color:#fff;padding:16px;font-size:16px;border:none}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block;width:8%;margin-right:14px}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:transparent;text-align:center;min-width:150px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ddd}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%]{background-color:#3e8e41}']})};var y=class t{supaBaseChat=g(C);constructor(){}getMessages(){return d(this,null,function*(){return yield this.supaBaseChat.supabaseFunctions.schema("public").from("messages").select("*").order("id",{ascending:!0})})}sendMessage(n,e,i){return d(this,null,function*(){return yield this.supaBaseChat.supabaseFunctions.schema("public").from("messages").insert([{context:n,username:e,inserted_at:i}]).then(({data:o,error:l})=>{l&&console.log(l.message)})})}onNewMessage(n){return this.supaBaseChat.supabaseFunctions.channel("messages_channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},e=>n(e.new)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var ct=["chatBox"],lt=(t,n)=>({"chat-myUser":t,"chat-anotherUser":n}),pt=t=>({blue:t});function mt(t,n){if(t&1&&(a(0,"div",5)(1,"p",12),p(2,"i",13),s(3),r(),a(4,"p",14),s(5),r(),a(6,"p",15),s(7),r()()),t&2){let e,i,o=n.$implicit,l=u(2);P("ngClass",V(5,lt,o.username==((e=l.supabase.currentUser())==null?null:e.email),o.username!=((e=l.supabase.currentUser())==null?null:e.email))),c(),P("ngClass",L(8,pt,o.username==((i=l.supabase.currentUser())==null?null:i.email))),c(2),x(" ",o.username.split("@",1)[0],": "),c(2),S(o.context),c(2),S(o.inserted_at)}}function ut(t,n){if(t&1){let e=w();a(0,"button",1),m("click",function(){b(e);let o=u();return f(o.openCloseChat())}),p(1,"i",2),r(),a(2,"div",3)(3,"div",4,0),N(5,mt,8,10,"div",5,I),r(),a(7,"div",6)(8,"p",7),s(9),p(10,"i",8),r(),a(11,"input",9),H("ngModelChange",function(o){b(e);let l=u();return z(l.newMessage,o)||(l.newMessage=o),f(o)}),r(),a(12,"button",10),m("click",function(){b(e);let o=u();return f(o.sendMessage())}),p(13,"i",11),r()()()}if(t&2){let e=u();c(5),F(e.messages),c(4),x("",e.newMessage.length,"/150"),c(2),U("ngModel",e.newMessage)}}var k=class t{messages=[];newMessage="";subscription;condition=!0;time;exactTime="";chatBox;supabase=g(C);supabaseChat=g(y);constructor(){}ngOnInit(){return d(this,null,function*(){let{data:n,error:e}=yield this.supabaseChat.getMessages();e?console.error("Error loading messages",e):(this.messages=n||[],setTimeout(()=>this.scrollToBottom(),0)),this.subscription=this.supabaseChat.onNewMessage(i=>{this.messages.push(i),setTimeout(()=>this.scrollToBottom(),100)})})}scrollToBottom(){this.chatBox&&(this.chatBox.nativeElement.scrollTop=this.chatBox.nativeElement.scrollHeight)}sendMessage(){return d(this,null,function*(){this.time=new Date,this.exactTime=this.time.getHours().toString()+":",this.time.getMinutes().toString().length<2&&(this.exactTime+="0"),this.exactTime+=this.time.getMinutes().toString();let n=this.supabase.currentUser();if(!n){console.log("Error");return}this.newMessage.trim()&&(yield this.supabaseChat.sendMessage(this.newMessage,n.email,this.exactTime),this.newMessage="")})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}openCloseChat(){let n=document.getElementById("chat");if(this.condition){n?.classList.add("open-chat"),this.condition=!1;return}n?.classList.remove("open-chat"),this.condition=!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-chat"]],viewQuery:function(e,i){if(e&1&&R(ct,5),e&2){let o;q(o=D())&&(i.chatBox=o.first)}},decls:1,vars:1,consts:[["chatBox",""],[1,"floatBtn","pulse",3,"click"],[1,"fa-solid","fa-comments",2,"font-size","50px","color","bisque"],["id","chat",1,"chat-container"],[1,"chat-box"],[3,"ngClass"],[1,"input-and-button"],[2,"font-size","20px","position","relative","color","bisque","top","90%","left","4%","margin-bottom","-1px"],[1,"fa-regular","fa-keyboard",2,"margin-left","10px"],["type","text","maxlength","150","placeholder"," Escriba un mensaje...",1,"input-chat-game",3,"ngModelChange","ngModel"],[1,"btn-send",3,"click"],[1,"fa-solid","fa-paper-plane"],[1,"red",2,"font-size","25px","margin-bottom","-5px",3,"ngClass"],[1,"fa-solid","fa-hat-cowboy"],[2,"line-height","15px"],[2,"font-size","15px","position","relative","left","85%","margin-bottom","-5px"]],template:function(e,i){if(e&1&&_(0,ut,14,2),e&2){let o;v(((o=i.supabase.currentUser())==null?null:o.email)!=null?0:-1)}},dependencies:[Q,j,nt,X,$,et,tt],styles:['@font-face{font-family:westernFont;src:url("./media/DakotaRegular-eZpj6-HFFEUJUJ.ttf")}@keyframes _ngcontent-%COMP%_pulse{25%{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}75%{-webkit-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}}@keyframes _ngcontent-%COMP%_slideInFromBelow{0%{transform:translateY(10%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeInOpacity{0%{opacity:0}to{opacity:1}}.input-and-button[_ngcontent-%COMP%]{position:relative;top:4.5%;left:3%}.chat-myUser[_ngcontent-%COMP%]{position:relative;right:-45%;min-width:none;max-width:210px;border-radius:15%;background-color:bisque;color:#000;padding:10px;font-size:20px;margin-bottom:10px;border:3px solid black;overflow-x:hidden;animation:.4s ease-in 0s 1 _ngcontent-%COMP%_slideInFromBelow}.chat-anotherUser[_ngcontent-%COMP%]{position:relative;left:0%;min-width:none;max-width:210px;border-radius:15%;background-color:#deb887;border:3px solid black;color:#000;padding:10px;overflow-x:hidden;font-size:20px;margin-bottom:10px;animation:.4s ease-in 0s 1 _ngcontent-%COMP%_slideInFromBelow}h1[_ngcontent-%COMP%]{font-size:25px}.chat-box[_ngcontent-%COMP%]{position:relative;max-height:470px;top:3%;overflow:auto;padding:15px;border:1px solid bisque;border-radius:5%}.chat-box[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.btn-send[_ngcontent-%COMP%]{position:relative;width:45px;height:45px;border-radius:15%;background-color:#be0c0caf;color:bisque;border-color:bisque}.btn-send[_ngcontent-%COMP%]:hover{transition:1s;background-color:#000;border-color:bisque;color:#e73332}.red[_ngcontent-%COMP%]{color:#dc143c}.input-chat-game[_ngcontent-%COMP%]{margin-right:30px;position:relative;left:3%;font-size:20px;width:300px;background-color:bisque;border-radius:2%;margin-bottom:25px;height:40px}.input-chat-game[_ngcontent-%COMP%]:focus{background-color:#000;border-color:bisque;color:bisque}i[_ngcontent-%COMP%]{font-size:20px}.chat-container[_ngcontent-%COMP%]{font-family:westernFont;position:absolute;width:450px;height:600px;border-radius:10%;top:55%;left:75%;background:#b814149a;box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(14.5px);-webkit-backdrop-filter:blur(14.5px);border:2px solid black;padding:15px;transform:scale(.0000001);transition:transform .4s,top .4s;z-index:2}.blue[_ngcontent-%COMP%]{color:#5f9ea0}.open-chat[_ngcontent-%COMP%]{transform:scale(1);top:25%;z-index:5000}.floatBtn[_ngcontent-%COMP%]{background-color:transparent;position:fixed;top:87%;left:94%;width:90px;height:80px;border-radius:15%;border:transparent;box-shadow:5px 3px 15px #000}.floatBtn[_ngcontent-%COMP%]:hover{background-color:brown}.floatBtn[_ngcontent-%COMP%]   .pulse[_ngcontent-%COMP%]:hover{-webkit-animation-name:_ngcontent-%COMP%_pulse;animation-name:_ngcontent-%COMP%_pulse;-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:1;animation-iteration-count:infinite}']})};var O=class t{title="Wild West Games";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(e,i){e&1&&p(0,"app-navbar")(1,"router-outlet")(2,"app-chat")},dependencies:[J,M,k],encapsulation:2})};W(O,it).catch(t=>console.error(t));
